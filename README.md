# 🏪 소상공인 폐업 위험 예측 및 RAG 기반 맞춤형 컨설팅 챗봇
> **불균형 데이터 해결을 위한 머신러닝 모델링과 LLM(RAG)을 결합한 비즈니스 솔루션**

## 1. 프로젝트 수행 절차
본 프로젝트는 데이터 기반의 예측과 실무적인 컨설팅을 결합하여 소상공인의 생존율을 높이는 5단계 파이프라인으로 진행되었습니다.

1. **문제 정의**: 소상공인 폐업률 급증 문제를 해결하기 위해, 폐업 징후를 선제적으로 포착하고 실질적인 경영 대안을 제시하는 서비스 기획
2. **데이터 전처리 (Preprocessing)**: 소상공인시장진흥공단 상권 정보, 카드 매출 데이터 등 파편화된 데이터셋을 결합하고 행정동 단위로 표준화
3. **테마별 탐색적 데이터 분석 (EDA)**: 지역 경쟁 지표(밀집도), 고객 행동 지표(재방문율) 등 폐업에 영향을 미치는 핵심 변수 파악
4. **모델링 및 최적화 (Modeling)**: 클래스 불균형 해소를 위한 SMOTE 적용 및 고성능 앙상블 모델 구축을 통한 예측 성능 극대화
5. **RAG 챗봇 서비스 구현 (RAG Implementation)**: 분석 결과와 정부 지원 정책 데이터를 연동하여 LangChain 기반의 맞춤형 컨설팅 환경 조성

## 2. 사용 도구
- **언어**: `Python 3.10`
- **데이터 핸들링**: `Pandas`, `NumPy`
- **머신러닝**: `Scikit-learn`, `XGBoost`, `CatBoost`, `RandomForest`, `Imbalanced-learn (SMOTE)`
- **AI/LLM**: `LangChain`, `OpenAI API`, `Vector Database (Chroma/FAISS)`
- **시각화**: `Seaborn`, `Matplotlib`

## 3. 분석 기법 및 선정 이유
- **SMOTE (Synthetic Minority Over-sampling Technique)**: 
  - **선정 이유**: 폐업 사례는 정상 사례에 비해 현저히 적은 **극심한 클래스 불균형** 문제를 가지고 있습니다. 이를 해결하지 않으면 모델이 정상으로만 편향되므로, 가상의 데이터를 생성하여 폐업 위험군을 더 정밀하게 학습시키기 위해 선정했습니다.
- **Ensemble Modeling (XGBoost, RandomForest, CatBoost)**: 
  - **선정 이유**: 비즈니스 지표와 같은 정형 데이터에서 높은 성능을 보이는 부스팅 및 배깅 모델을 융합했습니다. 특히 범주형 변수가 많은 특성을 고려하여 CatBoost를 결합해 예측력과 일반화 성능을 동시에 확보했습니다.
- **RAG (Retrieval-Augmented Generation)**: 
  - **선정 이유**: 단순한 확률 수치 제공을 넘어, 최신 지원 정책과 경영 가이드를 실시간으로 검색하여 답변하게 함으로써 AI의 환각을 방지하고 **실무적으로 활용 가능한 대안**을 제시하기 위해 선정했습니다.

## 4. 주요 분석 결과 (상세 결과)
### 📊 핵심 지표 분석 결과
- **경쟁 압력 지수**: 동일 행정동 내 유사 업종 밀집도가 **1%p 상승할 때 폐업 위험도가 약 9.4% 증가**함을 정량적으로 식별했습니다.
- **고객 충성도 지수**: 재방문 고객 비율이 **1%p 감소할 때 폐업 확률이 8.1% 상승**하는 임계값(Threshold)을 도출했습니다.

### 🤖 모델링 성과
- **재현율(Recall) 대폭 향상**: 클래스 불균형 처리를 통해 실제 폐업 위험군을 찾아내는 **재현율을 초기 모델 대비 약 4배(0.19 → 0.77) 향상**시켰습니다.
- **예측 정확도**: 앙상블 모델(Soft Voting)을 통해 복잡한 상권 환경에서도 안정적인 예측 정확도를 확보했습니다.

### 💬 RAG 컨설팅 성과
- **개인화된 정책 매칭**: 사용자가 고민(예: 임대료 부담)을 입력하면 예측된 폐업 확률과 함께 '소상공인 임대료 지원 사업' 등 즉시 신청 가능한 정책을 검색하여 답변하는 로직을 성공적으로 구현했습니다.

## 5. 프로젝트의 의의
- **선제적 리스크 관리**: 사후 처방이 아닌 데이터를 통한 사전 예측으로 소상공인의 경제적 타격을 최소화할 수 있는 과학적 근거를 제시했습니다.
- **기술 융합의 실효성**: 머신러닝의 '수치적 예측'과 LLM의 '자연어 상담'을 결합하여, 전문 지식이 없는 사용자도 데이터 분석 결과를 현장에서 즉시 활용할 수 있도록 접근성을 높였습니다.
- **행정 및 비즈니스 가치**: 분석 결과 도출된 오염 지도는 향후 안산시의 환경 개선 예산 배분 및 방지시설 지원 우선순위 결정에 실질적인 가이드라인이 될 수 있습니다.

## 6. 배운 점 및 회고
- **불균형 데이터 대응 역량**: 실무 데이터의 특성인 불균형 문제를 해결하며, 비즈니스 목적에 맞는 평가지표(Recall 등) 설정이 모델의 가치를 결정한다는 점을 체득했습니다.
- **RAG 아키텍처 체득**: 단순 LLM 호출을 넘어 Vector DB를 구축하고 관련 문서를 정밀하게 검색(Retrieval)하여 답변의 신뢰도를 제어하는 엔지니어링 역량을 확보했습니다.
- **사용자 중심 분석**: 가장 좋은 모델은 기술적으로 화려한 모델이 아니라, 사용자의 현실적인 고충을 해결해 줄 수 있는 도메인 기반의 솔루션임을 깨달았습니다.
